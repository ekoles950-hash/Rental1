import React, { useState, useRef } from 'react';
import { 
  Upload, X, Copy, Check, Sparkles, Loader2, Zap, Clapperboard, 
  Mic, Video, AlertTriangle, Layers, User, UserCheck, 
  Settings, Key, Smartphone, MonitorPlay, Film, Image as ImageIcon
} from 'lucide-react';

export default function App() {
  // --- STATE API KEYS ---
  const [geminiKey, setGeminiKey] = useState('');
  const [leonardoKey, setLeonardoKey] = useState('');

  // --- STATE GEMINI SCRIPT ---
  const [image, setImage] = useState(null);
  const [imageBase64, setImageBase64] = useState(null);
  const [instruction, setInstruction] = useState('');
  const [scenes, setScenes] = useState([]);
  const [loadingScript, setLoadingScript] = useState(false);
  const [errorScript, setErrorScript] = useState('');
  const [copied, setCopied] = useState(false);
  const [voiceGender, setVoiceGender] = useState('woman'); 
  const fileInputRef = useRef(null);

  // --- STATE LEONARDO VIDEO ---
  const [startFrame, setStartFrame] = useState(null);
  const [startFrameUrl, setStartFrameUrl] = useState(null);
  const [endFrame, setEndFrame] = useState(null);
  const [endFrameUrl, setEndFrameUrl] = useState(null);
  const [aspectRatio, setAspectRatio] = useState('9:16'); // '9:16' atau '16:9'
  const [videoPrompt, setVideoPrompt] = useState('');
  const [loadingVideo, setLoadingVideo] = useState(false);
  const [videoStatus, setVideoStatus] = useState('');
  const [errorVideo, setErrorVideo] = useState('');
  const [videoResult, setVideoResult] = useState(null);
  
  const startFrameRef = useRef(null);
  const endFrameRef = useRef(null);

  // --- FUNGSI BANTUAN GEMINI SCRIPT ---
  const technicalPrompt = "Negatif no blur no watermark. Diam di tempat. Fokus tajam. NEGATIF REVIEW: Dilarang keras membalik, memutar sembarangan, atau menunjukan bagian bawah/belakang. Produk harus konsisten.";

  const fileToBase64 = (file) => {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => {
        const base64String = reader.result.split(',')[1];
        const mimeType = reader.result.split(';')[0].split(':')[1];
        resolve({ base64: base64String, mimeType });
      };
      reader.onerror = (error) => reject(error);
    });
  };

  const handleImageUpload = (e) => {
    const file = e.target.files[0];
    if (file) {
      const imageUrl = URL.createObjectURL(file);
      setImage(imageUrl);
      fileToBase64(file).then((data) => setImageBase64(data)).catch(() => setErrorScript("Gagal membaca gambar."));
      setErrorScript('');
      setScenes([]);
    }
  };

  const parseAIResponse = (text) => {
    try {
      let cleanText = text.replace(/```json/g, '').replace(/```/g, '').trim();
      const start = cleanText.indexOf('[');
      const end = cleanText.lastIndexOf(']');
      if (start !== -1 && end !== -1) {
        return JSON.parse(cleanText.substring(start, end + 1));
      }
      throw new Error("Format JSON tidak ditemukan");
    } catch (e) {
      return [{ scene: "HASIL RAW", visual: "Format tidak standar.", audio: text.substring(0, 300) + "..." }];
    }
  };

  const handleGenerateScript = async () => {
    if (!geminiKey) return setErrorScript("Mohon isi API Key Gemini di bagian Pengaturan.");
    if (!imageBase64) return setErrorScript("Mohon unggah gambar produk terlebih dahulu.");

    setLoadingScript(true);
    setErrorScript('');
    setScenes([]);
    setCopied(false);

    try {
      const systemPrompt = `
        Anda adalah UGC Creator Expert.
        TUGAS: Analisis gambar produk, lalu buat SKENARIO VIDEO UGC (3 SCENE).
        TARGET TALENT: ${voiceGender === 'man' ? 'Pria' : 'Wanita (Gaya Nenek/Ibu yang hangat)'}.
        
        STRUKTUR SCENE:
        1. SCENE 1 (HOOK): Visual: Talent duduk menghadap kamera. Frame awal KOSONG. Talent menoleh sedikit, ambil produk dari luar frame. Prompt Wajib: "The product must remain identical in shape, color, texture." Audio: Kalimat pembuka hangat (Max 146 huruf).
        2. SCENE 2 (REVIEW): Visual: Kamera fokus produk. Jempol menekan/meraba. JANGAN DIPUTAR. Audio: Jelaskan detail.
        3. SCENE 3 (CTA): Visual: Talent tunjuk ke bawah (keranjang). Audio: Ajakan checkout.

        Output hanya JSON Array persis seperti ini:
        [
          { "scene": "1. HOOK (Opening Shot)", "visual": "...", "audio": "..." },
          { "scene": "2. REVIEW (Detail)", "visual": "...", "audio": "..." },
          { "scene": "3. CTA (Closing)", "visual": "...", "audio": "..." }
        ]
        Instruksi user: ${instruction}
      `;

      const response = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${geminiKey}`,
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            contents: [{ role: "user", parts: [{ text: systemPrompt }, { inlineData: { mimeType: imageBase64.mimeType, data: imageBase64.base64 } }] }],
            generationConfig: { responseMimeType: "application/json" }
          })
        }
      );

      const data = await response.json();
      if (!response.ok) throw new Error(data.error?.message || "Gagal menghubungi server Gemini AI.");
      
      const rawText = data.candidates?.[0]?.content?.parts?.[0]?.text;
      if (rawText) setScenes(parseAIResponse(rawText));
      else throw new Error("AI tidak memberikan respon.");

    } catch (err) {
      setErrorScript(err.message || "Gagal memproses script. Coba lagi.");
    } finally {
      setLoadingScript(false);
    }
  };

  const handleCopyScript = () => {
    if (scenes.length > 0) {
      let fullText = `[Konsep UGC]\n[Teknis: ${technicalPrompt}]\n\n`;
      scenes.forEach((s) => {
        fullText += `--- ${s.scene} ---\nVISUAL: ${s.visual}\nNARASI: "${s.audio}"\n\n`;
      });
      navigator.clipboard.writeText(fullText).then(() => {
        setCopied(true);
        setTimeout(() => setCopied(false), 2000);
      });
    }
  };

  // --- FUNGSI BANTUAN LEONARDO VIDEO ---
  const handleStartFrame = (e) => {
    const file = e.target.files[0];
    if (file) {
      setStartFrame(file);
      setStartFrameUrl(URL.createObjectURL(file));
    }
  };

  const handleEndFrame = (e) => {
    const file = e.target.files[0];
    if (file) {
      setEndFrame(file);
      setEndFrameUrl(URL.createObjectURL(file));
    }
  };

  const uploadToLeonardo = async (file, apiKey) => {
    const initRes = await fetch('https://cloud.leonardo.ai/api/rest/v1/init-image', {
      method: 'POST',
      headers: { 'Authorization': `Bearer ${apiKey}`, 'Content-Type': 'application/json' },
      body: JSON.stringify({ extension: file.name.split('.').pop() })
    });
    const initData = await initRes.json();
    if (!initData.uploadInitImage) throw new Error("API Key Leonardo tidak valid atau error server.");
    
    const uploadInfo = initData.uploadInitImage;
    const fields = JSON.parse(uploadInfo.fields);
    const formData = new FormData();
    for (const key in fields) formData.append(key, fields[key]);
    formData.append('file', file);

    await fetch(uploadInfo.url, { method: 'POST', body: formData });
    return uploadInfo.id; 
  };

  const checkVideoStatus = async (generationId, apiKey) => {
    const url = `https://cloud.leonardo.ai/api/rest/v1/generations/${generationId}`;
    const timer = setInterval(async () => {
      try {
        const res = await fetch(url, {
          method: 'GET',
          headers: { 'Authorization': `Bearer ${apiKey}`, 'Accept': 'application/json' }
        });
        const data = await res.json();
        const status = data.generations_by_pk?.status;

        if (status === "COMPLETE") {
          clearInterval(timer);
          setVideoResult(data.generations_by_pk.generated_images[0].motionMP4URL);
          setLoadingVideo(false);
          setVideoStatus("");
        } else if (status === "FAILED") {
          clearInterval(timer);
          throw new Error("Gagal merender video di server Leonardo.");
        }
      } catch (e) {
        if(e.message === "Gagal merender video di server Leonardo.") {
            setErrorVideo(e.message);
            setLoadingVideo(false);
            setVideoStatus("");
        }
      }
    }, 5000);
  };

  const handleGenerateVideo = async () => {
    if (!leonardoKey) return setErrorVideo("API Key Leonardo wajib diisi di Pengaturan!");
    if (!startFrame) return setErrorVideo("Start Frame wajib diupload!");
    if (!videoPrompt) return setErrorVideo("Prompt video wajib diisi!");

    setLoadingVideo(true);
    setVideoResult(null);
    setErrorVideo('');
    
    try {
      setVideoStatus("‚è≥ Mengunggah Start Frame ke Leonardo...");
      const startId = await uploadToLeonardo(startFrame, leonardoKey);

      let endId = null;
      if (endFrame) {
        setVideoStatus("‚è≥ Mengunggah End Frame...");
        endId = await uploadToLeonardo(endFrame, leonardoKey);
      }

      setVideoStatus("üîÑ Mengirim prompt & memulai render...");
      // Menambahkan panduan resolusi ke dalam prompt
      const finalPrompt = `${videoPrompt} [Format Requirements: Aspect Ratio ${aspectRatio === '9:16' ? 'Vertical 9:16 for TikTok/Reels' : 'Horizontal 16:9 for YouTube'}]`;

      const payload = {
        imageId: startId,
        prompt: finalPrompt,
        isPublic: false
      };

      const renderRes = await fetch('https://cloud.leonardo.ai/api/rest/v1/generations-motion-svd', {
        method: 'POST',
        headers: { 'Authorization': `Bearer ${leonardoKey}`, 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      
      const renderData = await renderRes.json();
      if (!renderData.motionSvdGenerationJob) throw new Error(renderData.error || "Gagal memulai render video.");
      
      const genId = renderData.motionSvdGenerationJob.generationId;
      setVideoStatus("üé• Video sedang diproses AI. Ini memakan waktu 1-3 menit...");
      checkVideoStatus(genId, leonardoKey);

    } catch (err) {
      setErrorVideo(err.message || "Terjadi kesalahan saat memproses video.");
      setLoadingVideo(false);
      setVideoStatus("");
    }
  };


  return (
    <div className="min-h-screen bg-slate-50 flex flex-col items-center py-8 px-4 font-sans text-slate-800 pb-20">
      
      {/* HEADER */}
      <div className="w-full max-w-2xl mb-8 text-center">
        <h1 className="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-rose-600 mb-2 flex items-center justify-center gap-2">
          <Clapperboard className="w-8 h-8 text-red-600 fill-current" />
          UGC Master & Video AI
        </h1>
        <p className="text-slate-500 text-sm font-medium">
          All-in-One: Script Generator (Gemini) & Video Creator (Leonardo)
        </p>
      </div>

      <div className="w-full max-w-2xl space-y-6">

        {/* ‚öôÔ∏è PENGATURAN API KEY */}
        <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
          <div className="bg-slate-100 px-6 py-3 border-b border-slate-200 flex items-center gap-2">
            <Settings className="w-5 h-5 text-slate-600" />
            <h2 className="font-bold text-slate-700">Pengaturan API Key</h2>
          </div>
          <div className="p-6 grid sm:grid-cols-2 gap-4 bg-slate-50/50">
            <div>
              <label className="text-xs font-bold text-slate-600 mb-1 flex items-center gap-1"><Key className="w-3 h-3"/> API Key Gemini (Untuk Script)</label>
              <input type="password" value={geminiKey} onChange={e => setGeminiKey(e.target.value)} placeholder="AIzaSy..." className="w-full p-2.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-400 outline-none" />
            </div>
            <div>
              <label className="text-xs font-bold text-slate-600 mb-1 flex items-center gap-1"><Key className="w-3 h-3"/> API Key Leonardo (Untuk Video)</label>
              <input type="password" value={leonardoKey} onChange={e => setLeonardoKey(e.target.value)} placeholder="Lakukan topup di Leonardo..." className="w-full p-2.5 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-rose-400 outline-none" />
            </div>
          </div>
        </div>

        {/* üìù STEP 1: SCRIPT CREATOR */}
        <div className="bg-white rounded-2xl shadow-xl border border-slate-100 overflow-hidden">
          <div className="bg-gradient-to-r from-rose-50 to-pink-50 px-6 py-4 border-b border-rose-100 flex items-center justify-between">
            <div className="flex items-center gap-2">
              <span className="bg-rose-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold">1</span>
              <h2 className="font-bold text-rose-800">Buat Script UGC (Gemini)</h2>
            </div>
          </div>

          <div className="p-6 border-b border-slate-100">
            <label className="block text-sm font-bold text-slate-700 mb-3">Foto Bahan (Produk)</label>
            {!image ? (
              <div onClick={() => fileInputRef.current.click()} className="border-2 border-dashed border-slate-300 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:bg-rose-50 hover:border-rose-400 transition-all">
                <Upload className="w-6 h-6 text-rose-500 mb-2" />
                <p className="text-sm text-slate-500 font-medium">Upload foto produk</p>
              </div>
            ) : (
              <div className="relative rounded-xl overflow-hidden border border-slate-200 bg-slate-100 w-full sm:w-1/2">
                <img src={image} alt="Preview" className="w-full h-48 object-cover" />
                <button onClick={() => setImage(null)} className="absolute top-2 right-2 bg-white/90 p-1.5 rounded-full shadow-sm hover:bg-red-50 text-red-600"><X className="w-4 h-4" /></button>
              </div>
            )}
            <input type="file" ref={fileInputRef} onChange={handleImageUpload} accept="image/*" className="hidden" />
          </div>

          <div className="p-6 bg-slate-50/50 space-y-4">
            <div>
              <label className="block text-sm font-bold text-slate-700 mb-2">Talent UGC</label>
              <div className="grid grid-cols-2 gap-3">
                <button onClick={() => setVoiceGender('woman')} className={`flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-bold border transition-all ${voiceGender === 'woman' ? 'bg-pink-100 border-pink-400 text-pink-700' : 'bg-white border-slate-200 text-slate-500'}`}><UserCheck className="w-4 h-4" /> Wanita</button>
                <button onClick={() => setVoiceGender('man')} className={`flex items-center justify-center gap-2 py-2.5 rounded-lg text-sm font-bold border transition-all ${voiceGender === 'man' ? 'bg-blue-100 border-blue-400 text-blue-700' : 'bg-white border-slate-200 text-slate-500'}`}><User className="w-4 h-4" /> Pria</button>
              </div>
            </div>
            <div>
              <label className="block text-sm font-bold text-slate-700 mb-2">Info Tambahan (Opsional)</label>
              <div className="relative">
                <input type="text" value={instruction} onChange={(e) => setInstruction(e.target.value)} placeholder="Contoh: Fokus ke sol yang empuk..." className="w-full p-3 pr-10 text-sm border border-slate-200 rounded-lg outline-none" />
                <Sparkles className="absolute right-3 top-3 w-4 h-4 text-rose-400 opacity-50" />
              </div>
            </div>

            {errorScript && <div className="p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-lg flex items-center gap-2"><AlertTriangle className="w-4 h-4" /> {errorScript}</div>}
            
            <button onClick={handleGenerateScript} disabled={loadingScript || !image} className={`w-full py-3.5 rounded-xl font-bold text-white shadow-md transition-all flex items-center justify-center gap-2 ${loadingScript || !image ? 'bg-slate-300 cursor-not-allowed' : 'bg-gradient-to-r from-red-600 to-rose-600 hover:shadow-rose-500/30'}`}>
              {loadingScript ? <><Loader2 className="w-5 h-5 animate-spin" /> Menganalisis...</> : <><Zap className="w-5 h-5" /> Buat Skenario Script</>}
            </button>
          </div>

          {/* SCRIPT RESULT */}
          {scenes.length > 0 && (
            <div className="p-6 bg-gray-900 text-white relative border-t border-slate-200">
              <div className="absolute top-0 left-6 -translate-y-1/2 bg-rose-500 text-[10px] font-black px-2 py-1 rounded uppercase flex items-center gap-1"><Layers className="w-3 h-3" /> Hasil Script</div>
              <div className="space-y-4 mt-2 mb-4">
                {scenes.map((scene, idx) => (
                  <div key={idx} className="bg-gray-800/50 rounded-lg p-3 border-l-2 border-rose-500">
                    <span className="text-[10px] font-bold bg-rose-900/50 text-rose-300 px-2 py-0.5 rounded mb-2 inline-block">{scene.scene}</span>
                    <div className="mb-2"><p className="text-xs text-gray-300"><span className="text-blue-400 font-bold">VISUAL:</span> {scene.visual}</p></div>
                    <div><p className="text-sm font-medium text-white italic"><span className="text-green-400 font-bold text-xs not-italic">NARASI:</span> "{scene.audio}"</p></div>
                  </div>
                ))}
              </div>
              <button onClick={handleCopyScript} className={`w-full flex justify-center items-center gap-2 py-2.5 rounded-lg text-sm font-bold transition-all ${copied ? 'bg-green-500 text-white' : 'bg-white text-gray-900 hover:bg-gray-100'}`}>
                {copied ? <><Check className="w-4 h-4" /> Tersalin!</> : <><Copy className="w-4 h-4" /> Salin Lengkap</>}
              </button>
            </div>
          )}
        </div>

        {/* üé• STEP 2: VIDEO CREATOR */}
        <div className="bg-white rounded-2xl shadow-xl border border-slate-100 overflow-hidden">
          <div className="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-blue-100 flex items-center justify-between">
            <div className="flex items-center gap-2">
              <span className="bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold">2</span>
              <h2 className="font-bold text-blue-900">Render Video (Leonardo AI)</h2>
            </div>
          </div>

          <div className="p-6 space-y-5">
            {/* Resolusi / Aspect Ratio */}
            <div>
              <label className="block text-sm font-bold text-slate-700 mb-2">Resolusi / Orientasi Video</label>
              <div className="grid grid-cols-2 gap-3">
                <button onClick={() => setAspectRatio('9:16')} className={`flex flex-col items-center justify-center gap-1 py-3 rounded-xl border transition-all ${aspectRatio === '9:16' ? 'bg-blue-50 border-blue-400 text-blue-700 shadow-sm' : 'bg-white border-slate-200 text-slate-500 hover:bg-slate-50'}`}>
                  <Smartphone className="w-5 h-5" />
                  <span className="text-xs font-bold">TikTok / Reels (9:16)</span>
                </button>
                <button onClick={() => setAspectRatio('16:9')} className={`flex flex-col items-center justify-center gap-1 py-3 rounded-xl border transition-all ${aspectRatio === '16:9' ? 'bg-red-50 border-red-400 text-red-700 shadow-sm' : 'bg-white border-slate-200 text-slate-500 hover:bg-slate-50'}`}>
                  <MonitorPlay className="w-5 h-5" />
                  <span className="text-xs font-bold">YouTube (16:9)</span>
                </button>
              </div>
            </div>

            {/* Frame Uploads */}
            <div className="grid grid-cols-2 gap-4">
              {/* Start Frame */}
              <div>
                 <label className="block text-xs font-bold text-slate-700 mb-2">Start Frame (Awal) <span className="text-red-500">*</span></label>
                 {!startFrameUrl ? (
                    <div onClick={() => startFrameRef.current.click()} className="border-2 border-dashed border-slate-300 rounded-lg h-28 flex flex-col items-center justify-center cursor-pointer hover:bg-blue-50">
                      <ImageIcon className="w-5 h-5 text-slate-400 mb-1" />
                      <span className="text-[10px] text-slate-500">Upload Start</span>
                    </div>
                 ) : (
                    <div className="relative rounded-lg overflow-hidden border border-slate-200 h-28 group">
                      <img src={startFrameUrl} className="w-full h-full object-cover" />
                      <button onClick={() => {setStartFrame(null); setStartFrameUrl(null)}} className="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white text-xs font-bold"><X className="w-4 h-4 mr-1"/> Hapus</button>
                    </div>
                 )}
                 <input type="file" ref={startFrameRef} onChange={handleStartFrame} accept="image/*" className="hidden" />
              </div>

              {/* End Frame */}
              <div>
                 <label className="block text-xs font-bold text-slate-700 mb-2">End Frame (Akhir) <span className="text-slate-400 font-normal">Opsional</span></label>
                 {!endFrameUrl ? (
                    <div onClick={() => endFrameRef.current.click()} className="border-2 border-dashed border-slate-300 rounded-lg h-28 flex flex-col items-center justify-center cursor-pointer hover:bg-blue-50">
                      <ImageIcon className="w-5 h-5 text-slate-400 mb-1" />
                      <span className="text-[10px] text-slate-500">Upload End</span>
                    </div>
                 ) : (
                    <div className="relative rounded-lg overflow-hidden border border-slate-200 h-28 group">
                      <img src={endFrameUrl} className="w-full h-full object-cover" />
                      <button onClick={() => {setEndFrame(null); setEndFrameUrl(null)}} className="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white text-xs font-bold"><X className="w-4 h-4 mr-1"/> Hapus</button>
                    </div>
                 )}
                 <input type="file" ref={endFrameRef} onChange={handleEndFrame} accept="image/*" className="hidden" />
              </div>
            </div>

            {/* Prompt Input */}
            <div>
              <label className="block text-sm font-bold text-slate-700 mb-2">Prompt Animasi Video <span className="text-red-500">*</span></label>
              <textarea 
                rows="3" 
                value={videoPrompt}
                onChange={(e) => setVideoPrompt(e.target.value)}
                placeholder="Paste panduan VISUAL dari hasil script di atas ke sini..." 
                className="w-full p-3 text-sm border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-400 outline-none resize-none"
              ></textarea>
            </div>

            {/* Error / Status Messages */}
            {errorVideo && <div className="p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-lg flex items-center gap-2"><AlertTriangle className="w-4 h-4" /> {errorVideo}</div>}
            {videoStatus && <div className="p-3 bg-blue-50 border border-blue-100 text-blue-700 text-sm font-medium rounded-lg text-center">{videoStatus}</div>}

            {/* Generate Button */}
            <button onClick={handleGenerateVideo} disabled={loadingVideo} className={`w-full py-3.5 rounded-xl font-bold text-white shadow-md transition-all flex items-center justify-center gap-2 ${loadingVideo ? 'bg-slate-300 cursor-not-allowed' : 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:shadow-indigo-500/30'}`}>
              {loadingVideo ? <><Loader2 className="w-5 h-5 animate-spin" /> Merender Video...</> : <><Film className="w-5 h-5" /> Generate Video (Leonardo)</>}
            </button>

            {/* Video Result */}
            {videoResult && (
              <div className="mt-6 p-4 bg-green-50 border-2 border-green-400 rounded-xl text-center">
                 <h3 className="font-bold text-green-700 mb-3 flex items-center justify-center gap-2"><Check className="w-5 h-5"/> Video Selesai!</h3>
                 <video controls autoPlay loop className="w-full rounded-lg shadow-lg bg-black">
                    <source src={videoResult} type="video/mp4" />
                 </video>
              </div>
            )}

          </div>
        </div>

      </div>
    </div>
  );
}